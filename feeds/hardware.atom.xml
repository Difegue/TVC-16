<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Blogopolis - Hardware</title><link href="https://tvc-16.science/" rel="alternate"></link><link href="https://tvc-16.science/feeds/hardware.atom.xml" rel="self"></link><id>https://tvc-16.science/</id><updated>2023-01-20T00:00:00+01:00</updated><entry><title>Converting a Mi Temperature and Humidity Monitor 2 to run off USB</title><link href="https://tvc-16.science/usb-mi-sensor.html" rel="alternate"></link><published>2023-01-20T00:00:00+01:00</published><updated>2023-01-20T00:00:00+01:00</updated><author><name>Difegue</name></author><id>tag:tvc-16.science,2023-01-20:/usb-mi-sensor.html</id><summary type="html">&lt;p&gt;It's all about balance.&lt;/p&gt;</summary><content type="html">&lt;p&gt;The recent &lt;a href="https://www.youtube.com/watch?v=bTpKM43VhwA"&gt;LTT video&lt;/a&gt; about converting battery-powered smart appliances to run on wired power instead reminded me that I did something similar recently for my &lt;a href="https://www.mi.com/pk/mi-temperature-and-humidity-monitor-2/"&gt;Mi Humidity sensor&lt;/a&gt; because I'm too cheap to buy a coin cell every year.&lt;br&gt;
&lt;img alt="A happy Mi monitor getting its current from USB" src="images/midivider/divider-1.jpg"&gt;&lt;br&gt;
Except that I don't care about going even &lt;em&gt;jankier&lt;/em&gt; than a usual LTT video would, so I just used my old pal the &lt;a href="./mcorigins.html"&gt;voltage divider.&lt;/a&gt;  &lt;/p&gt;
&lt;p&gt;Since the Mi monitor takes a classic CR2032, you should normally adjust to give it 3V -- But I noticed the monitor ran just fine on 2.5V, so it's easier to use the same resistor on both sides of the divider to slash the voltage by half.&lt;br&gt;
&lt;img alt="A jank-in-progress montage of the monitor having wires taped to its contacts" src="images/midivider/divider-2.jpg"&gt;&lt;br&gt;
Using stronger resistors will reduce the current going through your divider, so you'll want to try various ohm values&lt;sup id="ref-1"&gt;&lt;a href="#note-1"&gt;*&lt;/a&gt;&lt;/sup&gt; to get a current that'll still let that lil' appliance do its job.  &lt;/p&gt;
&lt;p&gt;It's quite convenient if you have some of those newfangled wall plugs that have a USB port included! The first resistor does get a &lt;em&gt;tiny bit&lt;/em&gt; warm though. :^)   &lt;/p&gt;
&lt;p&gt;&lt;sup id="note-1"&gt;&lt;a href="#ref-1"&gt;*&lt;/a&gt; I use &lt;a href="https://ohmslawcalculator.com/voltage-divider-calculator"&gt;https://ohmslawcalculator.com/voltage-divider-calculator&lt;/a&gt; to calculate my voltage dividers, but that tool doesn't give you amperage calculations. I can't remember which resistor value I used I'm sorry&lt;/sup&gt;  &lt;/p&gt;</content><category term="Hardware"></category><category term="xiaomi"></category><category term="jank"></category><category term="voltage dividers"></category></entry><entry><title>Replacing the PRAM Battery in a PowerBook G3 Wallstreet</title><link href="https://tvc-16.science/wallstreet-pram-replacement.html" rel="alternate"></link><published>2021-03-16T00:00:00+01:00</published><updated>2021-03-16T00:00:00+01:00</updated><author><name>Difegue</name></author><id>tag:tvc-16.science,2021-03-16:/wallstreet-pram-replacement.html</id><summary type="html">&lt;p&gt;Ah yes, DMX's 2006 hit track, "Lord Give Me a Chime".&lt;/p&gt;</summary><content type="html">&lt;p&gt;I got my hands on a &lt;a href="https://en.wikipedia.org/wiki/PowerBook_G3#PowerBook_G3_Series_(Wallstreet_Series_I)"&gt;Powerbook G3&lt;/a&gt; recently. Lovely machine!  &lt;/p&gt;
&lt;p&gt;&lt;img alt="dingusbook screen" src="https://tvc-16.science/images/powerbook/powerbook_screen.jpg"&gt;  &lt;/p&gt;
&lt;p&gt;But it had a few issues I quickly noticed once the machine booted without the &lt;a href="https://www.youtube.com/watch?v=7G3SXTg7gDI"&gt;usual Mac chime.&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;Mostly, &lt;strong&gt;no sound&lt;/strong&gt;, and a screen with some flickering and purpleish artifacts.&lt;br&gt;
Kinda weak hinges too, but considering that those were apparently a &lt;a href="https://web.archive.org/web/20021003091053/http://www.ocf.berkeley.edu/%7Ekenao/unhinged/"&gt;terrible mess&lt;/a&gt; during the service life of the laptop, I'm gonna consider myself lucky.  &lt;/p&gt;
&lt;p&gt;Previous experiences with Macs have shown me that a missing chime usually happens when the PRAM(fancy apple name for CMOS) battery in the machine dies out.&lt;br&gt;
Replacing it usually goes a long way towards getting the computer back on track to healthy town.  &lt;/p&gt;
&lt;p&gt;It probably wouldn't fix the sound missing in Mac OS, but since diagnosing that issue involves taking the laptop apart, we might as well replace the battery!  &lt;/p&gt;
&lt;h2&gt;Building a replacement PRAM&lt;/h2&gt;
&lt;p&gt;Due to this being a laptop however, it doesn't use the &lt;a href="https://www.newertech.com/products/pram_3_6v.php"&gt;chonkster 3.6v&lt;/a&gt; batteries you'd commonly find on other old Macs.&lt;br&gt;
Instead, after taking apart the entire machine (thanks &lt;a href="https://www.ifixit.com/Guide/PowerBook+G3+Wallstreet+PRAM+Battery+Replacement/11?revisionid=HEAD"&gt;ifixit&lt;/a&gt;), you get to pull out a weird mini-rechargeable battery composed of 6 coin cells.  &lt;/p&gt;
&lt;p&gt;&lt;img alt="what in the goddamn" src="https://tvc-16.science/images/powerbook/powerbook_pram.jpg"&gt;&lt;br&gt;
(PSA: Some PowerBook models seem to only have &lt;a href="https://www.mac-forums.com/threads/pram-battery-replacement-for-powerbook-g3-400mhz-lombard-alternatives.341150/"&gt;4 cells&lt;/a&gt; instead of 6.)&lt;/p&gt;
&lt;p&gt;Luckily, those cells are Panasonic VL2330 3V rechargeable coin cells, and are still produced today!&lt;br&gt;
Although it does mean you need to basically re-build a PRAM set yourself.  &lt;/p&gt;
&lt;p&gt;You'll see this for yourself upon opening up the set, but the cells are connected to each other on both ends matching the following schema:  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;  &lt;span class="n"&gt;___&lt;/span&gt;    &lt;span class="n"&gt;___&lt;/span&gt;    &lt;span class="n"&gt;___&lt;/span&gt;      
 &lt;span class="o"&gt;/&lt;/span&gt;   &lt;span class="err"&gt;\&lt;/span&gt;  &lt;span class="o"&gt;/&lt;/span&gt;   &lt;span class="err"&gt;\&lt;/span&gt;  &lt;span class="o"&gt;/&lt;/span&gt;   &lt;span class="err"&gt;\&lt;/span&gt;    
&lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="c1"&gt;---  - ---  -  |   --red wire &lt;/span&gt;
 &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;___&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;  &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;___&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;  &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;
                 &lt;span class="o"&gt;|&lt;/span&gt;
                 &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="c1"&gt;--------white wire &lt;/span&gt;
  &lt;span class="n"&gt;___&lt;/span&gt;    &lt;span class="n"&gt;___&lt;/span&gt;    &lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt;      
 &lt;span class="o"&gt;/&lt;/span&gt;   &lt;span class="err"&gt;\&lt;/span&gt;  &lt;span class="o"&gt;/&lt;/span&gt;   &lt;span class="err"&gt;\&lt;/span&gt;  &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="err"&gt;\&lt;/span&gt;    
&lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="c1"&gt;---  + ---  +  |   --black wire&lt;/span&gt;
 &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;___&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;  &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;___&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;  &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;___&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;               

  &lt;span class="n"&gt;___&lt;/span&gt;    &lt;span class="n"&gt;___&lt;/span&gt;    &lt;span class="n"&gt;___&lt;/span&gt;      
 &lt;span class="o"&gt;/&lt;/span&gt;   &lt;span class="err"&gt;\&lt;/span&gt;  &lt;span class="o"&gt;/&lt;/span&gt;   &lt;span class="err"&gt;\&lt;/span&gt;  &lt;span class="o"&gt;/&lt;/span&gt;   &lt;span class="err"&gt;\&lt;/span&gt;    
&lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="c1"&gt;---  + ---  + -------red wire &lt;/span&gt;
 &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;___&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;  &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;___&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;  &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;___&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;

                 &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="c1"&gt;--------white wire                &lt;/span&gt;
  &lt;span class="n"&gt;___&lt;/span&gt;    &lt;span class="n"&gt;___&lt;/span&gt;    &lt;span class="n"&gt;___&lt;/span&gt;      
 &lt;span class="o"&gt;/&lt;/span&gt;   &lt;span class="err"&gt;\&lt;/span&gt;  &lt;span class="o"&gt;/&lt;/span&gt;   &lt;span class="err"&gt;\&lt;/span&gt;  &lt;span class="o"&gt;/&lt;/span&gt;   &lt;span class="err"&gt;\&lt;/span&gt;    
&lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="c1"&gt;---  - ---  - -------black wire&lt;/span&gt;
 &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;___&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;  &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;___&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;  &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;___&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;    
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;sub&gt;&lt;sup&gt;Tried to throw this schema into &lt;a href="https://github.com/ivanceras/svgbob"&gt;svgbob&lt;/a&gt; but it didn't look too hot so you'll have to deal with the OG ASCII&lt;/sub&gt;&lt;/sup&gt;&lt;br&gt;
VL2330 cells are pretty cheap at your local &lt;a href="https://aliexpress.com/item/4001264470979.html"&gt;Chinese overlord&lt;/a&gt;, so you can build yourself a brand new PRAM for like $20.  &lt;/p&gt;
&lt;p&gt;For assembly, I simply cut off the leads from the old PRAM and re-attached them to the new cells with ye ole' mates duct tape. 🩹 The stock PRAM is &lt;a href="https://www.youtube.com/watch?v=GGTGIlT6JvM"&gt;spot welded&lt;/a&gt; together, so you can't simply unsolder the leads like you'd do with a dumb circuit board.  &lt;/p&gt;
&lt;h2&gt;Results&lt;/h2&gt;
&lt;p&gt;Once the battery assembled, tested for continuity and put back in the laptop, did we get a chime on boot?&lt;br&gt;
Well, I did get a form of &lt;em&gt;noise&lt;/em&gt; out of the laptop, but it sounded more like some radio screeching than an actual chime.  &lt;/p&gt;
&lt;p&gt;Before putting the machine back together I had taken a look at the other pieces, and it's likely that the Sound/Power Board is dying and being what causes the remaining problems.  &lt;/p&gt;
&lt;p&gt;&lt;img alt="dingusbook power board" src="https://tvc-16.science/images/powerbook/powerbook_board.jpg"&gt;  &lt;/p&gt;
&lt;p&gt;That &lt;a href="https://en.wikipedia.org/wiki/Ceramic_capacitor#Multi-layer_ceramic_capacitors_(MLCC)"&gt;MLCC&lt;/a&gt; capacitor in front of the main power jack has certainly seen better days.&lt;br&gt;
&lt;sub&gt;It's always the fucking caps isn't it&lt;/sub&gt;  &lt;/p&gt;
&lt;p&gt;The screen still flickers, probably due to power draw issues coming from said board, but hey at least it doesn't artifact out anymore!  &lt;/p&gt;</content><category term="Hardware"></category><category term="apple"></category><category term="mac"></category><category term="powerbook"></category><category term="repair"></category><category term="pram"></category></entry><entry><title>Using PS/2 keyboard/mice on old Macs with Arduino</title><link href="https://tvc-16.science/adbuino-ps2.html" rel="alternate"></link><published>2020-02-12T00:00:00+01:00</published><updated>2020-02-12T00:00:00+01:00</updated><author><name>Difegue</name></author><id>tag:tvc-16.science,2020-02-12:/adbuino-ps2.html</id><summary type="html">&lt;p&gt;It's time to deal with ADB. Not the Android one!&lt;/p&gt;</summary><content type="html">&lt;p&gt;My Mac fleet has been progressing nicely with all the &lt;a href="https://tvc-16.science/emac-lcd-mod.html"&gt;previous&lt;/a&gt; &lt;a href="https://tvc-16.science/performa-plus-display.html"&gt;restorations&lt;/a&gt;, but I still didn't have a way to control the pre-OSX machines. Those machines came to me keyboardless, and I initially thought it'd be no problem at all!&lt;br&gt;
Alas, I did not know about the terrifying Apple Desktop Bus.&lt;br&gt;
&lt;img alt="noooooooo" src="https://tvc-16.science/images/adb/pinout.jpg"&gt;&lt;br&gt;
&lt;a href="https://en.wikipedia.org/wiki/Apple_Desktop_Bus"&gt;ADB for short&lt;/a&gt;, this connector was used to plug keyboards, mice, joysticks and what have you into Macintoshes until USB took over.  Since I won't be able to use my old PS/2 stuff, might as well invest into some ADB devic--
&lt;img alt="the apple tax is fucking real" src="https://tvc-16.science/images/adb/ebay.jpg"&gt;  &lt;/p&gt;
&lt;h2&gt;😥 😥 😥&lt;/h2&gt;
&lt;p&gt;I shouldn't be surprised really, but I feel bad shelling out 40€ for a yellowed keyboard/mouse combo when I already have tons of PC ones laying around.  &lt;/p&gt;
&lt;h1&gt;A quick tour of ADB replacement solutions&lt;/h1&gt;
&lt;p&gt;There aren't many solutions to convert other devices to ADB on the market.&lt;br&gt;
The best one seems to be the &lt;a href="https://www.bigmessowires.com/usb-wombat"&gt;USB-ADB Wombat&lt;/a&gt;, but that doesn't exactly come cheap either!&lt;br&gt;
Although it basically offers the full shebang and works with more modern USB keyboards.&lt;br&gt;
&lt;img alt="wombat" src="https://tvc-16.science/images/adb/wombat.jpg"&gt;&lt;br&gt;
You also have &lt;a href="http://www.geethree.com/adb/"&gt;this thing&lt;/a&gt;, which &lt;em&gt;a contrario&lt;/em&gt; is rather old and only works for mice. Meh.  &lt;/p&gt;
&lt;p&gt;Turning to DIY solutions, most of the stuff out there is meant to use ADB keyboards on modern machines, using code from &lt;a href="https://github.com/tmk/tmk_keyboard/tree/master/converter/adb_usb"&gt;TMK&lt;/a&gt;. People really love their Apple Extended Keyboards!&lt;br&gt;
Which is nice and all, but the opposite of what I need.  &lt;/p&gt;
&lt;p&gt;After a bit more searching I did end up finding &lt;a href="http://thinkclassic.org/viewtopic.php?id=630"&gt;this spare forum post.&lt;/a&gt;&lt;br&gt;
PS/2 to ADB, both keyboard and mouse running off an off-the-shelf Arduino? Sounds great!  &lt;/p&gt;
&lt;p&gt;The code is available &lt;a href="http://synack.net/svn/adbduino/"&gt;on bbraun's SVN&lt;/a&gt;, so I grabbed an Arduino off my dead project pile and got to work.&lt;/p&gt;
&lt;h1&gt;Making the adbduino adapter&lt;/h1&gt;
&lt;p&gt;The provided .osm file for the circuit board needs &lt;a href="https://www.osmondpcb.com/"&gt;Osmond&lt;/a&gt; to be opened.&lt;br&gt;
Opening it, it's all pretty simple however, no need for extra resistors or anything:  &lt;/p&gt;
&lt;p&gt;&lt;img alt="adbduino circuit board" src="https://tvc-16.science/images/adb/osmond.png"&gt;&lt;br&gt;
The PCB has spots for two ADB connectors, but the second one is really just meant to enable passthrough to other ADB devices if you have any.&lt;br&gt;
Since I wasn't sure this stuff would actually still work, I breadboarded an abomination with just one connector.&lt;br&gt;
&lt;img alt="end my life" src="https://tvc-16.science/images/adb/adapter.jpg"&gt;  &lt;/p&gt;
&lt;p&gt;The original project used a Pro Mini, but the Nano I had on hand is essentially the same thing, so no problem on that front.  &lt;/p&gt;
&lt;p&gt;Hooked it up to the ol' IIvx, and heck, it works! With some caveats.  &lt;/p&gt;
&lt;h1&gt;Using n' troubleshooting&lt;/h1&gt;
&lt;p&gt;My first major issue came with the mouse I was using -- It was struggling to synchronize itself with the ADB bus, essentially wrecking havoc on the Mac with random movements and clicks when moved.&lt;br&gt;
&lt;img alt="end my life" src="https://tvc-16.science/images/adb/adbduino-early.jpg"&gt;&lt;br&gt;
When eventually synced however(which could be helped by arcane methods such as &lt;sup&gt;&lt;sub&gt; flipping the mouse over and repeatedly pressing caps lock&lt;/sup&gt;&lt;/sub&gt;), it ran fine.  &lt;/p&gt;
&lt;p&gt;Thankfully, just switching out the mouse for an old USB model with a USB-&amp;gt;PS/2 adapter fixed everything.&lt;br&gt;
I don't recommend buying new PS/2 mice from AliExpress if you really need them!  &lt;/p&gt;
&lt;p&gt;The other big issue I had came from the keyboard skipping keys and occasionally staying "stuck" on the last keypress, resulting in a text a bit like &lt;code&gt;thissssssssss&lt;/code&gt;.&lt;br&gt;
Some debugging with the Serial monitor later, there were essentially three potential cases going on when releasing a key:  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;A) 0x3C (key pressed) -&amp;gt; 0x3D (key released)  &lt;/span&gt;
&lt;span class="err"&gt;B) 0x3C (key pressed) -&amp;gt; 0xFF (keyboard error)  &lt;/span&gt;
&lt;span class="err"&gt;C) 0x3C (key pressed) -&amp;gt; 0xFF (keyboard error) -&amp;gt; 0x3C (key pressed)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Case A is the normal one, B skipped the key, and C was causing the stuck key problem.&lt;br&gt;
This is &lt;strong&gt;totally&lt;/strong&gt; the keyboard's fault (heck, I've had this one since Windows 98), but since this solution is about being as cheap as I can possibly be, I'd rather try to fix this through software. &lt;em&gt;aww yeah it's arduino hacking time&lt;/em&gt;  &lt;/p&gt;
&lt;iframe width="516" height="290" src="https://www.youtube.com/embed/1ZsETdpmvR0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;

&lt;p&gt;...Well that's what I'd like to say, but I'm far from being good at hardware programming and dropped my bitwise operators, so I only managed a half-fix.  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;By &lt;a href="https://github.com/Difegue/Chaotic-Realm/blob/8c8afceb654f921774d88ac99e36613b679c1b9f/adbduino/sketch/adbuino.ino#L313"&gt;storing the last pressed keycode&lt;/a&gt;, we can recalculate its keyup variant and send that to ADB instead when we encounter a &lt;code&gt;0xFF&lt;/code&gt; error code. This fixes case B!  &lt;/li&gt;
&lt;li&gt;Case C is fixed by adding a &lt;a href="https://github.com/Difegue/Chaotic-Realm/blob/8c8afceb654f921774d88ac99e36613b679c1b9f/adbduino/sketch/adbuino.ino#L455"&gt;timer check&lt;/a&gt; so that a further keypress is dropped if it comes too soon for human hands.  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Adding timers is pretty sloppy and nearly breaks the ADB implementation since the protocol is super dependent on timing, but commenting out all the &lt;code&gt;Serial.print&lt;/code&gt; debug calls makes it fast enough to pass! &lt;sup&gt;&lt;sub&gt; damn I'm good at programming&lt;/sup&gt;&lt;/sub&gt;&lt;/p&gt;
&lt;p&gt;Although just dropping this bugged keypress fucks with the keyboard's internal state, so the next time said key is pressed for real, it'll be &lt;strong&gt;skipped&lt;/strong&gt;.&lt;br&gt;
This could be solved by sending some extra stuff on the PS/2 side of things but ehhhhhh, good enough. This is much less annoying for casual use than the stuck keys.  &lt;/p&gt;
&lt;h1&gt;Spare thoughts&lt;/h1&gt;
&lt;p&gt;&lt;img alt="I retrobright'd this powermac and it looks pretty darn good now" src="https://tvc-16.science/images/adb/adbduino-final.jpg"&gt;  &lt;/p&gt;
&lt;p&gt;Building this thing cost me around &lt;strong&gt;5€&lt;/strong&gt; to get an ADB cable, some PS/2 connectors and the PS/2 mouse, which eventually proved itself to be useless.&lt;br&gt;
If you don't own spare PS/2 devices or an Arduino from a dead project, the total cost probably rises to 10€ or so.&lt;br&gt;
The ADB connector itself was salvaged from an old destroyed PowerBook dock, but any female S-video connector will do, as they both use DIN-4.  &lt;/p&gt;
&lt;p&gt;All around, this is much cheaper than buying a real ADB keyboard or a USB adapter! Although it certainly isn't flawless.&lt;br&gt;
The issues I had seem more related to my PS/2 hardware being old than the adapter itself, however.  &lt;/p&gt;
&lt;p&gt;You can find my hacked-up version of the adbduino sketch &lt;a href="https://github.com/Difegue/Chaotic-Realm/tree/master/adbduino"&gt;here&lt;/a&gt;.  &lt;/p&gt;</content><category term="Hardware"></category><category term="apple"></category><category term="macintosh"></category><category term="mac"></category><category term="arduino"></category><category term="adb"></category><category term="ps/2"></category><category term="diy"></category><category term="retrocomputing"></category></entry><entry><title>Fixing an Apple Performa Plus CRT Display</title><link href="https://tvc-16.science/performa-plus-display.html" rel="alternate"></link><published>2019-12-27T00:00:00+01:00</published><updated>2019-12-27T00:00:00+01:00</updated><author><name>Difegue</name></author><id>tag:tvc-16.science,2019-12-27:/performa-plus-display.html</id><summary type="html">&lt;p&gt;I ain't afraid of no CRT.&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;img alt="domo watashi wa performa-san desu" src="https://tvc-16.science/images/performa/performa.jpg"&gt;&lt;br&gt;
This is an Apple Performa Plus Display. It's...a completely standard Shadow Mask CRT.  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;The Apple Performa Plus Display was a low-end Goldstar-built 14-inch monitor designed and fabricated for the Macintosh Performa series. Apple slightly modified this device to create the Apple Color Plus monitor, which was essentially the Performa Plus Display in a nicer case. The Apple Performa Plus Display also had a tilt &amp;amp; swivel stand.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I liked the size though, so I grabbed it! Only issue is that its cable was cut off.&lt;br&gt;
&lt;img alt="this is fucking barbaric but what do you expect out of a screen with no detachable cable" src="https://tvc-16.science/images/performa/performa2.jpg"&gt;&lt;/p&gt;
&lt;p&gt;The tube seemed to work fine when powered on, although there's no real way to make sure without feeding it a proper video signal! What the hell, let's take it apart.&lt;br&gt;
&lt;img alt="dude it's alright CRTs can't kill yo-*dies in flyback transformer*" src="https://tvc-16.science/images/performa/performa3.jpg"&gt;  &lt;/p&gt;
&lt;p&gt;The inside circuit looked pretty much perfect -- No blown caps or anything weird that'd have made me give up on the spot.&lt;br&gt;
What I'm interested in is the internal video connector here, which is at the other end of the cut-off cable:  &lt;/p&gt;
&lt;p&gt;&lt;img alt="wish I had a time machine to '94 to ask apple/goldstar engineers why the ground isn't in the connector" src="https://tvc-16.science/images/performa/performa4.jpg"&gt;&lt;br&gt;
Of course, there's no detailed information on the net about the pinout of an internal video connector for a one-off CRT monitor.&lt;br&gt;
The Service Manual certainly doesn't help either:&lt;br&gt;
&lt;img alt="haha yeah fuck you apple" src="https://tvc-16.science/images/performa/performaservice.png"&gt;&lt;br&gt;
So, how am I going to remake the cable for this thing?  &lt;/p&gt;
&lt;h1&gt;Technotes to the rescue&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;Technical Notes provide late breaking information about new Apple technologies and supplementary documentation discussing some of the more complex issues related to programming for the Mac OS.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I was surprised to see that old Mac hardware is actually quite well documented thanks to Apple's old &lt;a href="https://developer.apple.com/library/archive/navigation/#"&gt;technotes&lt;/a&gt;.&lt;br&gt;
I used a &lt;a href="https://www.fenestrated.net/mac/mirrors/Apple%20Technotes%20(As%20of%202002)/"&gt;mirror from 2002&lt;/a&gt; to shorten a bit the amount of articles I had to search/read through, but you can certainly pull all the info you need from the official site.  &lt;/p&gt;
&lt;p&gt;Looking at the &lt;a href="https://www.fenestrated.net/mac/mirrors/Apple%20Technotes%20(As%20of%202002)/hw/hw_08.html"&gt;Color Monitor Connections&lt;/a&gt; article basically gave me all the info I needed.&lt;br&gt;
Since this is Apple, Macintosh screens don't use classic VGA but DA-15 connectors with a custom pinout:&lt;br&gt;
&lt;img alt="Macintosh II Video Card and Macintosh IIci Built-in Video" src="https://tvc-16.science/images/performa/mac_video.gif"&gt;&lt;br&gt;
Looking at this pinout and the way the cables are laid out/colored in the internal video connector, you can theorize a mapping. Let's look back at what is in the CRT:  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The red/blue/white wires are each paired with a matching ground(black) wire.&lt;/li&gt;
&lt;li&gt;After that, there is only one brown wire and two black wires left.&lt;/li&gt;
&lt;li&gt;The chassis (global) ground isn't even on the connector, making it rather obvious.  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It's easy to guess that the pairs of red/blue/white match the color signals (&lt;code&gt;RED/RED.GND&lt;/code&gt;, &lt;code&gt;BLU/BLU.GND&lt;/code&gt;, etc.). &lt;sup&gt;&lt;sub&gt;It's a bit weird that Green is represented by a white wire, I guess they didn't have green ? &lt;/sup&gt;&lt;/sub&gt;&lt;br&gt;
What about the brown wire, though?  &lt;/p&gt;
&lt;p&gt;The last piece of the puzzle is that Mac screens don't use Horizontal/Vertical Sync like VGA, instead preferring to use &lt;a href="https://en.wikipedia.org/wiki/Component_video_sync"&gt;Composite Sync&lt;/a&gt;.&lt;br&gt;
The DA-15 pinout above has pins for VGA-style &lt;code&gt;HSYNC/VSYNC&lt;/code&gt;, but those are meant for those not-at-all common cases where you'd hook up a VGA screen to your Mac with an adapter.  &lt;/p&gt;
&lt;p&gt;Therefore, there are only &lt;strong&gt;two&lt;/strong&gt; wires to hook up for the Sync signal (&lt;code&gt;CSYNC&lt;/code&gt; and &lt;code&gt;CSYNC.GND&lt;/code&gt;), instead of the four for VGA.(&lt;code&gt;HSYNC/VSYNC&lt;/code&gt; and their matching grounds)&lt;br&gt;
It seems then likely that the brown wire is the &lt;code&gt;CSYNC&lt;/code&gt; signal!  &lt;/p&gt;
&lt;h3&gt;But aren't you missing some pins from the DA-15 picture?&lt;/h3&gt;
&lt;p&gt;I am! I didn't talk about &lt;code&gt;SENSE0/1/2&lt;/code&gt; yet.&lt;br&gt;
Those pins are meant to be grounded in specific ways to tell the Mac what kind of screen we're plugging in. For example:  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;The Macintosh LC requires that pin 4 (SENSE0) be connected to Ground to signal the connection of a 640 x 480 monitor. The Macintosh LC requires that pin 4 and 10 (SENSE0 and SENSE2) be connected to Ground to signal the connection of a 512 x 384 monitor (i.e., the Macintosh 12&amp;quot; RGB Display). The Macintosh LC requires that pin 10 (SENSE2) be connected to Ground to signal the connection of a VGA monitor. Pin 7 (SENSE1) is grounded in the Macintosh LC.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The way those pins are interpreted depends on the Macintosh you're plugging the screen into, but the one we're interested in never seems to change much: &lt;code&gt;Grounding SENSE0 means the monitor is 640x480.&lt;/code&gt;&lt;br&gt;
That's the resolution of the Performa Plus, so I'll be leaving the other two pins alone.  &lt;/p&gt;
&lt;h1&gt;Time to connect&lt;/h1&gt;
&lt;p&gt;I grabbed a cheap DA-15 cable off AliExpress and made an atrocious Frankencable out of it:&lt;br&gt;
&lt;img alt="end my life" src="https://tvc-16.science/images/performa/performa5.jpg"&gt;  &lt;/p&gt;
&lt;p&gt;The connections mostly match what I wrote above, except some yellow/white cables magically appeared at the end that weren't in the video connector.&lt;br&gt;
I guessed those were probably only there for DA-15 compliance and led nowhere, so I left 'em unconnected.  &lt;/p&gt;
&lt;p&gt;I hooked up the other end of the cable to a &lt;a href="https://twitter.com/Difegue/status/1206696379483148289?s=20"&gt;freshly-salvaged&lt;/a&gt; Macintosh IIvx, powered everything on expecting to get a horribly mangled image and:  &lt;/p&gt;
&lt;p&gt;&lt;img alt="haha this is a disaste-wait what" src="https://tvc-16.science/images/performa/performa6.jpg"&gt;&lt;br&gt;
&lt;sup&gt;&lt;sub&gt;Wow this actually works &lt;/sup&gt;&lt;/sub&gt; I mean &lt;strong&gt;of course it works!&lt;/strong&gt;&lt;br&gt;
&lt;img alt="based" src="https://tvc-16.science/images/performa/izutsumi.gif"&gt;&lt;/p&gt;
&lt;h1&gt;Screen size and final observations&lt;/h1&gt;
&lt;p&gt;&lt;img alt="Macintosh IIvx" src="https://tvc-16.science/images/performa/performa7.jpg"&gt;&lt;br&gt;
The image quality is surprisingly good for a makeshift cable here -- No parasites or blurry picture.&lt;br&gt;
Although I found it odd that the image doesn't fill the screen entirely.&lt;br&gt;
Since the IIvx is a pretty old Mac(running System 7), I thought its video card might not have the horsepower to handle 640x480.  &lt;/p&gt;
&lt;p&gt;No worries! Time to upgrade a bit and try the cable out on a Power Mac G3:&lt;br&gt;
&lt;img alt="Power Mac G3" src="https://tvc-16.science/images/performa/performa8.jpg"&gt;&lt;br&gt;
This is &lt;strong&gt;slightly&lt;/strong&gt; better! But not by much.&lt;br&gt;
The resolution utility in Mac OS 9 does say the screen resolution is at 640x480, so there are a few possible reasons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The CRT itself is configured to display the image like this  &lt;/li&gt;
&lt;li&gt;The screen actually supports resolutions higher than 640x480 and I fucked up forcing the resolution through &lt;code&gt;SENSE0&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;Those white/yellow cables aren't there just for show pardner 🤠&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For option 1 the only way out is aligning the CRT manually.&lt;br&gt;
While I'm less afraid of being zapped by CRTs after working on the eMac, this is next level and messing with factory settings is probably a terrible idea.&lt;/p&gt;
&lt;p&gt;Option 2 can be tested on the Power Mac G3 by overriding the resolution with &lt;a href="https://www.madrau.com/SRXv3/html/SR2/indexSR2.html"&gt;SwitchRes2&lt;/a&gt;, which I'll try later.&lt;br&gt;
And if it's option 3, I probably won't even bother since the cable is already &lt;em&gt;pretty good™&lt;/em&gt; as it stands.  &lt;/p&gt;
&lt;p&gt;&lt;img alt="Can't believe I bothered that much just for a dumb Apple sticker" src="https://tvc-16.science/images/performa/performa9.jpg"&gt;&lt;br&gt;
I thank the gods of NASA in these festive times for the gift that is duct tape. Happy 2020!  &lt;/p&gt;</content><category term="Hardware"></category><category term="apple"></category><category term="macintosh"></category><category term="mac"></category><category term="performa"></category><category term="crt"></category><category term="diy"></category><category term="retrocomputing"></category></entry><entry><title>Some notes on restoring a 2003 1GHz eMac</title><link href="https://tvc-16.science/emac-lcd-mod.html" rel="alternate"></link><published>2019-11-28T00:00:00+01:00</published><updated>2019-11-28T00:00:00+01:00</updated><author><name>Difegue</name></author><id>tag:tvc-16.science,2019-11-28:/emac-lcd-mod.html</id><summary type="html">&lt;p&gt;I guess this is an Apple blog now.&lt;/p&gt;</summary><content type="html">&lt;p&gt;I recently found an old &lt;a href="https://en.wikipedia.org/wiki/EMac"&gt;eMac&lt;/a&gt;.  &lt;/p&gt;
&lt;p&gt;&lt;img alt="yeah rip" src="https://tvc-16.science/images/emac/emac (1).jpg"&gt;  &lt;/p&gt;
&lt;p&gt;It was not in good shape.&lt;br&gt;
I never really dabbled in Apple hardware before this (in fact my first real hands-on with Mac OS as a whole was what, 8 months ago ?), so I quickly tried booting it and it seemed to work! Except the CRT coil was glowing red. Neat.  &lt;/p&gt;
&lt;p&gt;There's a surprising amount of documentation online about restoring eMacs -- Probably due to a mix of the failing analog boards and the low pricepoint of the machine. As a result, I tried fixing the thing. Here are a few notes.  &lt;/p&gt;
&lt;h2&gt;Getting some reading done&lt;/h2&gt;
&lt;p&gt;The essential reference for eMac modification is &lt;a href="https://web.archive.org/web/20180220163441/http://www.lbodnar.dsl.pipex.com/eServer/"&gt;Leo Bodnar's site&lt;/a&gt;, or at least the archive.org snapshots of it, as it has since then died a brutal death.  &lt;/p&gt;
&lt;p&gt;Other helpful links were &lt;a href="https://fr.ifixit.com/Device/eMac"&gt;iFixit&lt;/a&gt; for figuring out how to dismantle the beast, and the &lt;a href="http://gmcotton.com/Ham_Radio/MISC%20Manuals/Mac/emac%20service%20manual.pdf"&gt;Original Apple service manual.&lt;/a&gt; Basic stuff.  &lt;/p&gt;
&lt;p&gt;My initial reference and guide for most of the process was this &lt;a href="https://ierna.com/2006/07/02/emac-lcd-conversion/"&gt;2006 article&lt;/a&gt; on an eMac LCD conversion. Quite detailed but it misses a few details, which I'll go over here.  &lt;/p&gt;
&lt;h2&gt;Connecting the logic board to a working screen and power supply&lt;/h2&gt;
&lt;p&gt;Once the machine taken apart, I've recovered the original power and video cables that were connected to the CRT board, and modified them to connect to Molex/VGA respectively.&lt;br&gt;
The pinouts can be found on the &lt;a href="https://web.archive.org/web/20180220163441/http://www.lbodnar.dsl.pipex.com/eServer/"&gt;Leo Bodnar archive&lt;/a&gt;, alongside a more detailed breakout of the different boards present in the machine.&lt;/p&gt;
&lt;p&gt;As far as the power cable goes, it can really connect to anything that outputs both 12 and 5V -- As mentioned in the archive, the eMac actually expects 20 and 19V on a few of its pins for Firewire support, but using 12V for those works fine enough.  &lt;/p&gt;
&lt;p&gt;I did redirect the hard drive and DVD player to run off the PSU directly instead of the eMac's integrated down-converter board, in order to make sure those have the voltage they need.  &lt;/p&gt;
&lt;p&gt;&lt;img alt="damn that's a lot of icons" src="https://tvc-16.science/images/emac/emac (2).jpg"&gt;  &lt;/p&gt;
&lt;p&gt;Well whaddaya know, this actually works. Time to drop all this good stuff into a case.  &lt;/p&gt;
&lt;h2&gt;Dropping the LCD screen&lt;/h2&gt;
&lt;p&gt;Any well-proportioned 17" LCD fits the eMac front panel, but if you're like me and blindly followed the ierna blog thinking you could just slam it in and call it a day, you'll probably be surprised.  &lt;/p&gt;
&lt;p&gt;&lt;img alt="lcd dropped in emac front panel" src="https://tvc-16.science/images/emac/emac (3).jpg"&gt;  &lt;/p&gt;
&lt;p&gt;My screen had bigger bezels than the one he used, which required me to cut off the microphone support stand and use tape to fix it instead.&lt;br&gt;
&lt;img alt="microphone support(pic from ierna)" src="https://tvc-16.science/images/emac/micro.jpg"&gt;&lt;br&gt;
(pic from ierna, as I didn't take a picture of this part.)  &lt;/p&gt;
&lt;p&gt;This made the screen fit fine in the panel, but the CRT cowl which comes on top of it was too small as well!&lt;br&gt;
The cowl is essential to the structure of the machine, but luckily you can get away with just cutting the corners.&lt;br&gt;
&lt;img alt="damn that's a lot of icons" src="https://tvc-16.science/images/emac/emac (4).jpg"&gt;  &lt;/p&gt;
&lt;p&gt;As a tradeoff though, I didn't cut the outside of the case like ierna, so all those modifications are invisible.&lt;br&gt;
Sure, I can't turn off the screen and the OSX Menu is slightly hidden by the front panel but ehh, I'll fix it in software.  &lt;/p&gt;
&lt;h2&gt;Mounting the power supply&lt;/h2&gt;
&lt;p&gt;Mounting a full-sized ATX PSU in the original case was challenging, and is frankly overkill considering the eMac doesn't draw that much power.&lt;br&gt;
Sadly it's all I had on hand so I rolled with it.  &lt;/p&gt;
&lt;p&gt;There are mounting holes on the plate since it originally housed the analog board, but of course they don't line up whatsoever with ATX, so I had to make some custom mounting brackets to get it to stay fixed. I really hope you guys don't do this.  &lt;/p&gt;
&lt;p&gt;&lt;img alt="screwing those bottom screws with the plastic parts blocking your paths was a real joy" src="https://tvc-16.science/images/emac/emac (5).jpg"&gt;  &lt;/p&gt;
&lt;p&gt;One last hurdle caused by the ATX supply was that it was blocking the pins of the plastic case when putting the eMac back together.&lt;br&gt;
The pins go in the two large holes on top you can see there, so I had to sand them down a bit to make them smaller.  &lt;/p&gt;
&lt;p&gt;And it's done! Well, almost.  &lt;/p&gt;
&lt;h2&gt;Display refresh rate hell&lt;/h2&gt;
&lt;p&gt;&lt;img alt="pictures taken moments before disaster" src="https://tvc-16.science/images/emac/emac (6).jpg"&gt;  &lt;/p&gt;
&lt;p&gt;So, I got 10.14 Tiger booted up, listened to some music through iTunes and it seems fine!&lt;br&gt;
Then I went to toy a bit in the settings and everything fell apart.  &lt;/p&gt;
&lt;p&gt;As mentioned by lbodnard, the eMac's screen resolutions use &lt;strong&gt;very high&lt;/strong&gt; refresh rates (up to 100Hz), which go far beyond what old TFT LCDs can handle.&lt;br&gt;
OSX seemed to know about this at first and set a 75Hz rate so my LCD was usable, but a misstep on my part in System Settings set the resolution to an unusable rate.  &lt;/p&gt;
&lt;p&gt;Therefore, my eMac is left without a screen again. 😐&lt;br&gt;
Resetting the resolution settings &lt;a href="http://hints.macworld.com/article.php?story=2001100114532165"&gt;seems rather easy&lt;/a&gt; if you have filesystem access, but I don't, so I'll probably have to take the machine apart again and plug in a newer screen that can handle the high rates.  &lt;/p&gt;
&lt;p&gt;If there's one warning to take from this, it's that you should probably enable Mac OS's built-in SSH/VNC servers so you can run the eMac headless -- Screen lockout happens easily!  &lt;/p&gt;
&lt;h2&gt;Update: Getting out of display rate hell&lt;/h2&gt;
&lt;p&gt;The solution to the above conundrum was indeed plugging in another screen. Luckily OSX wasn't stuck at some super high rate, so a more recent LCD did the trick.  &lt;/p&gt;
&lt;p&gt;&lt;img alt="all's right with the world thanks to switchresx" src="https://tvc-16.science/images/emac/emac_end.jpg"&gt;  &lt;/p&gt;
&lt;p&gt;I promptly installed an old version of &lt;a href="http://www.madrau.com/index.html"&gt;SwitchResX&lt;/a&gt; in order to disable all the extra resolutions the eMac adds to account for its normal CRT screen.&lt;br&gt;
This means no more surprises when starting a game that goes to fullscreen and tries to guess the best resolution out of what the machine offers.  &lt;/p&gt;
&lt;p&gt;And I guess I'm finally done with this machine! It took quite a while.&lt;br&gt;
&lt;sub&gt;&lt;sup&gt;The hard drive is starting to fail though so I'll probably need to clone it and drop a new IDE drive in this sucker...&lt;/sup&gt;&lt;/sub&gt;&lt;/p&gt;
&lt;h2&gt;Final notes&lt;/h2&gt;
&lt;p&gt;My first experience with OSX was with 10.14 Mojave a few months back -- Using 10.4 Tiger on this machine, it's pretty funny how 98% of the UI has essentially stayed the same in 13 years.&lt;br&gt;
Guess I'm too used to Windows switching everything around every couple of releases.  &lt;/p&gt;
&lt;p&gt;At least I don't have to learn how to use the Finder again!  &lt;/p&gt;</content><category term="Hardware"></category><category term="apple"></category><category term="macos"></category><category term="emac"></category><category term="lcd"></category><category term="mod"></category><category term="diy"></category></entry></feed>